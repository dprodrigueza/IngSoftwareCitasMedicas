<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ControladorCitaMedica.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">citas</a> &gt; <a href="index.source.html" class="el_package">ec.edu.ups.controlador</a> &gt; <span class="el_source">ControladorCitaMedica.java</span></div><h1>ControladorCitaMedica.java</h1><pre class="source lang-java linenums">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package ec.edu.ups.controlador;

import ec.edu.ups.modelo.CitaMedica;
import ec.edu.ups.modelo.Medico;
import ec.edu.ups.modelo.Paciente;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.sql.Time;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

/**
 *
 * @author VIVIANA
 */
public class ControladorCitaMedica {

    private List&lt;CitaMedica&gt; citaMedica;

<span class="fc" id="L33">    public ControladorCitaMedica() {</span>
<span class="fc" id="L34">        citaMedica = new ArrayList&lt;&gt;();</span>

<span class="fc" id="L36">    }</span>

    public boolean crear() throws ParseException {
<span class="fc" id="L39">        DateFormat format = new SimpleDateFormat(&quot;dd/mm/yyyy&quot;); // Creamos un formato de fecha</span>
<span class="fc" id="L40">        Date fecha = format.parse(&quot;17/01/1999&quot;);</span>
<span class="fc" id="L41">        Paciente paciente = new Paciente(1, &quot;Catolico&quot;, &quot;Cuenca&quot;, &quot;Azuay&quot;, &quot;Estudiante&quot;, &quot;0101585933&quot;, &quot;Maria&quot;, &quot;Romero&quot;, &quot;2864219&quot;, &quot;Culebrillas y Mantense&quot;, fecha, &quot;Femenino&quot;);</span>
<span class="fc" id="L42">        Medico medico = new Medico(1, 2, &quot;drodri&quot;, &quot;cuenca&quot;, &quot;0106630999&quot;, &quot;diego&quot;, &quot;rodriguez&quot;, &quot;2864219&quot;, &quot;Culebrillas&quot;, fecha, &quot;Masculino&quot;);</span>

<span class="fc" id="L44">        CitaMedica cm = new CitaMedica(1, fecha, &quot;09:00&quot;, &quot;Dolor de Est√≥mago&quot;, medico, paciente);</span>

<span class="fc" id="L46">        return true;</span>
    }

    /*
    public void crear(CitaMedica cm) {
        String sql = &quot;INSERT INTO cita_medica VALUES ( &quot; + cm.getCita_id()+&quot;'&quot; + cm.getCita_fecha()+&quot;', '&quot; + cm.getCita_hora()+ &quot;' , '&quot;
                + cm.getCita_motivo()+ &quot;', '&quot; + cm.getMedico()+ &quot;', '&quot; + cm.getPaciente()+&quot;' ,'&quot;+&quot;);&quot;;
        
        System.out.println(&quot;&quot;+sql);
        
        try {
            conectar();
            Statement sta = con.createStatement();
            sta.executeUpdate(sql);
            desconectar();
        } catch (SQLException ex) {
            System.out.println(&quot;Error &quot; + ex.getMessage());
            System.out.println(sql);
        }
    }
    
    
    public void eliminar(int id) {
         String sql = &quot;DELETE FROM cita_medica WHERE  cita_id  =&quot; + id + &quot;;&quot;;
        try {
            conectar();
            Statement sta = con.createStatement();
            sta.executeUpdate(sql);
            desconectar();
        } catch (SQLException ex) {
            System.out.println(&quot;Error &quot; + ex.getMessage());
        }
    }

      public CitaMedica buscar(int id) {

        String sql = &quot;SELECT * FROM cita_medica WHERE  cita_id  ='&quot;  + id + &quot;';&quot;;
        
        //System.out.println(sql);
         
        try {
            conectar();
            Statement sta = con.createStatement();
            ResultSet reset = sta.executeQuery(sql);
            while (reset.next()) {
                CitaMedica c = new CitaMedica(id);
                //c.setIdCliente(reset.getInt(1));
                c.setCita_fecha(reset.getDate(1));
                c.setCita_hora(reset.getTime(2));
                c.setCita_motivo(reset.getString(3));
                
               
                //System.out.println(&quot;cedula sy existe&quot;);
                return c;
                
            }
            System.out.println(&quot;la cita no existe&quot;);
           
            desconectar();
        } catch (SQLException ex) {
            System.out.println(&quot;Error &quot; + ex.getMessage());
        }
        return null;
    }
     
    
     public void actualizar(CitaMedica cm, int id) {
         
         
    String sql = &quot;UPDATE cita_medica  SET   cita_id  = '&quot; + cm.getCita_id()
            + &quot;', cita_fecha = '&quot; + cm.getCita_fecha()
            + &quot;', cita_hora = '&quot; + cm.getCita_hora()
            + &quot;', cita_motivo = '&quot;+ cm.getCita_motivo()
            + &quot;', cita_medico = '&quot; + cm.getMedico()
            + &quot;', cita_paciente = '&quot; + cm.getPaciente()
          
                + &quot; WHERE cita_id ='&quot; + id + &quot;';&quot;;
        System.out.println(sql);
        try {
            conectar();
            Statement sta = con.createStatement();
            sta.executeUpdate(sql);
            desconectar();
        } catch (SQLException ex) {
            System.out.println(&quot;Error  &quot; + ex.getMessage());
        }
    }
     */
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.0.201403182114</span></div></body></html>